<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <!--This one seems to work all the time, but really small on ipad-->
    <!--<meta name="viewport" content="initial-scale=0.4">-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" media="all" href="theme/css/default.css">
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
    <link rel="stylesheet" media="all" href="custom.css">
    <base target="_blank">
    <!-- This amazingness opens all links in a new tab. -->
    <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

<slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/BEKK_logo.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
        <h1 data-config-title><!-- populated from slide_config.json --></h1>

        <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>

        <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
</slide>

<slide>
    <hgroup>
        <h2>Outline</h2>
    </hgroup>
    <article>
        <ul>
            <li>Overview & Motivation</li>
            <li>CSP vs Actor Model</li>
            <li>Introduction to CSP
                <ul>
                    <li>Code examples in PyCSP</li>
                </ul>
            </li>
            <li>Travelling Salesman Problem in PyCSP</li>
            <li>Summary</li>
        </ul>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>CSP Overview</h2>
    </hgroup>
    <article>
        <ul class="build">
            <li>A paradigm for expressing concurrency
                <ul>
                    <li>
                        Based on message-passing
                    </li>
                </ul>
            </li>
            <li>First described in a 1978 paper by Tony Hoare
                <ul>
                    <li>
                        (Actor model first described in 1973)
                    </li>
                </ul>
            </li>
            <li>Key concepts
                <ul>
                    <li>Sequential <b>processes</b></li>
                    <li>Synchronous communication through <b>channels</b></li>
                    <li>Multiplexing of channels with <b>choice/alternation</b></li>
                </ul>
            </li>
        </ul>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Two Models of Concurrency</h2>
    </hgroup>
    <article>
        <ul class="build">
            <li>
                Shared Memory
                <ul>
                    <li>Threads</li>
                    <li>Locks</li>
                    <li>Mutexes</li>
                </ul>
            </li>
        </ul>
        <ul class="build">
            <li>
                Message Passing (CSP and Actor Model)
                <ul>
                    <li>Processes</li>
                    <li>Messages</li>
                    <li>No shared data</li>
                </ul>
            </li>
        </ul>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Shared Memory - Problem 1</h2>
    </hgroup>
    <article>
        <p>
            <img width="45%" src="images/shared_memory_11.svg"/>
            <img width="45%" style="float: right" src="images/shared_memory_12.svg"/>
        </p>
        <ul>Program crash in critical region corrupts memory
            <li>
                <ul>
                    <li>Difficult to reason about</li>
                    <li>Hard to recover from failure</li>
                </ul>
            </li>
        </ul>

        <footer class="source">slide inspired by: <a href="http://www.infoq.com/presentations/erlang-software-for-a-concurrent-world">link</a></footer>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Shared Memory - Problem 2</h2>
    </hgroup>
    <article>
        <p class="flexbox vcenter">
            <img src="images/shared_memory_2.png"/>
        </p>
        <br>
        <ul>Where is shared memory physically located?
            <li>
                <ul>
                    <li>Even harder to recover from failure</li>
                </ul>
            </li>
        </ul>

        <footer class="source">slide inspired by: <a href="http://www.infoq.com/presentations/erlang-software-for-a-concurrent-world">link</a></footer>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Multi/Many-core is a Reality</h2>
    </hgroup>
    <article class="vcenter">
        <p>
            <a href="http://www.tilera.com/sites/default/files/productbriefs/TILE-Gx8009_PB036-02.pdf">
                The TILE-Gx8072™ Processor
            </a>
        </p>

        <div style="margin: 0 auto;">
            <img width="50%" style="float: left; padding-right: 5%" src="images/tilera_tile_gx72-schema.jpg"/>
            <ul width="35%" style="padding-top: 20px;">
                <li>Commercially available</li>
                <li>72 identical cores @ 1.0 to 1.2GHz</li>
                <li>256 KB L2 per core</li>
            </ul>
        </div>

    </article>
</slide>


<slide class="segue dark quote nobackground">
    <article class="flexbox vleft auto-fadein">
        <q>
            An object oriented language is a language with good
            support for objects. A concurrency oriented language
            has good support for concurrency
        </q>
        <br>
        <p class="quoteLink">
            <a href="http://www.guug.de/veranstaltungen/ffg2003/papers/ffg2003-armstrong.pdf">Concurrency Oriented
                Programming in Erlang</a>

        </p>

        <div class="author">
            Joe Armstrong
        </div>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Outline</h2>
    </hgroup>
    <article>
        <ul>
            <li>Overview & Motivation</li>
            <li class="outlineHighlight">CSP vs Actor Model</li>
            <li>Introduction to CSP
                <ul>
                    <li>Code examples in PyCSP</li>
                </ul>
            </li>
            <li>Travelling Salesman Problem in PyCSP</li>
            <li>Summary</li>
        </ul>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Channel vs Mailbox</h2>
    </hgroup>
    <article>
        <div style="margin: 0 auto">
            <div class="noListPadding" style="float: left; width: 51%">
                <img width="100%" src="images/csp_illustration1.png"/>
                <br><br>
                <ul>
                    <li>
                        CSP
                        <ul>
                            <li>Communication through channels</li>
                            <li>Processes are "anonymous"</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="noListPadding" style="float: right; width: 43%; padding-top: 10px">
                <img width="100%" src="images/actor_illustration1.png"/>
                <br><br>
                <ul>
                    <li>
                        Actor Model
                        <ul>
                            <li>Point-to-point communication</li>
                            <li>No anonymity</li>
                        </ul>
                    </li>
                </ul>

            </div>
        </div>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>CSP &ndash; communication semantics</h2>
    </hgroup>
    <article class="flexbox vcenter">
        <img width="90%" src="images/csp_illustration21.png" alt="Description" title="Description">
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Outline</h2>
    </hgroup>
    <article>
        <ul>
            <li>Overview & Motivation</li>
            <li>CSP vs Actor Model</li>
            <li class="outlineHighlight">Introduction to CSP
                <ul>
                    <li>Code examples in PyCSP</li>
                </ul>
            </li>
            <li>Travelling Salesman Problem in PyCSP</li>
            <li>Summary</li>
        </ul>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>PyCSP</h2>
    </hgroup>
    <article>
        <ul>
            <li>Python library that implements core CSP primitives</li>
            <li>Development started in 2006. Still under active development</li>
            <li>Transparent distributed communication using standard python modules</li>
        </ul>
    </article>
</slide>



<slide>
    <hgroup>
        <h2><span class="mono padRight">Process</span> and <span class="mono padLeft">Parallel</span></h2>
    </hgroup>
    <article>
          <pre class="prettyprint" data-lang="python">@process
def Process1():
    time.sleep(1)  # Sleep 1 second
    print 'process1 exiting'

@process
def Process2():
    time.sleep(2)  # Sleep 2 seconds
    print 'process2 exiting'

Parallel(process1(), process2())  # Blocks
print 'program terminating'</pre>

        <div class=build>
        <pre class="prettyprint plain" data-lang="plain">process1 exiting
process2 exiting
program exiting</pre>
        </div>
    </article>
</slide>


<slide>
    <hgroup>
        <h2><span class="mono padRight">Process</span> and <span class="mono padLeft">Spawn</span></h2>
    </hgroup>
    <article class="smaller">
          <pre class="prettyprint" data-lang="python">@process
def Process1():
    time.sleep(1)  # Sleep 1 second
    print 'process1 exiting'

@process
def Process2():
    time.sleep(2)  # Sleep 2 seconds
    print 'process2 exiting'

Spawn(Process1(), Process2())  # Non-blocking
print 'processes started'
shutdown()  # Blocks
print 'program terminating'</pre>

        <div class=build>
        <pre class="prettyprint plain" data-lang="plain">processes started
process1 exiting
process2 exiting
program terminating</pre>
        </div>
    </article>
</slide>


<slide>
    <hgroup>
        <h2><span class="mono">Channel</span><span class="padLeft padRight">&ndash;</span>semantics</h2>
    </hgroup>
    <article class="smaller">
          <pre class="prettyprint" data-lang="python">@process
def Process1(chan_out):
    chan_out('Hello process2')  # Blocks
    print 'process1 exiting'

@process
def Process2(chan_in):
    time.sleep(1)  # Sleep 1 second
    print 'reading from channel'
    msg = chan_in()  # Blocks
    print 'message received: ', msg

chan = Channel()
Parallel(process1(chan.writer()), process2(chan.reader()))</pre>

        <div class=build>

        <pre class="prettyprint plain" data-lang="plain">reading from channel
message received:  Hello process2
process1 exiting</pre>
        </div>
    </article>
</slide>


<slide>
    <hgroup>
        <h2><span class="mono">Channel</span><span class="padLeft padRight">&ndash;</span>flexibility</h2>
    </hgroup>
    <article >
          <pre class="prettyprint" data-lang="python">@process
def Worker(input_chan):
    (output_chan, work_func) = input_chan()
    result = work_func()
    output_chan(result)

def work():
    return 2 * 2

input_chan = Channel()
Spawn(Worker(input_chan.reader()))

result_chan = Channel()
msg = (result_chan.writer(), work)  # Careful, 'work' is shared reference

input_chan.writer()(msg)
result = result_chan.reader()()  # Get result</pre>
    </article>
</slide>


<slide>
    <hgroup>
        <h2><span class="mono">AltSelect</span><span class="padLeft padRight">&ndash;</span>multiplex channels</h2>
    </hgroup>
    <article >
          <pre class="prettyprint" data-lang="python">@process
def Process1(input_chan, output_chan):
    input_guard = InputGuard(input_chan)
    output_guard = OutputGuard(output_chan, msg='hello from process1')
    (chan, msg) = AltSelect(input_guard, output_guard)
    if chan == input_chan:
        print 'input read: ', msg
    elif chan == output_chan:
        print 'output written'

input, output = Channel(), Channel()
Spawn(Process1(input.reader(), output.writer()))

if random.choice([True, False]):
    input.writer()('hello process1')
else:
    output.reader()()</pre>
    </article>
</slide>


<slide>
    <hgroup>
        <h2><span class="mono">PriSelect</span><span class="padLeft padRight">&ndash;</span>timeout and skip guards</h2>
    </hgroup>
    <article >
          <pre class="prettyprint" data-lang="python">@process
def Process1(input_chan):
    guards = [InputGuard(input_chan), SkipGuard()]
    (chan, msg) = PriSelect(guards)  # Always perform skip guard last
    if chan == input_chan:
        print 'input read: ', msg
    else:
        print 'no input'

input = Channel()
Spawn(Process1(input.reader()))

guard = OutputGuard(input.writer(), msg='hello process1')
PriSelect(guard, TimeoutGuard(seconds=1))
</pre>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Outline</h2>
    </hgroup>
    <article>
        <ul>
            <li>Overview & Motivation</li>
            <li>CSP vs Actor Model</li>
            <li>Introduction to CSP
                <ul>
                    <li>Code examples in PyCSP</li>
                </ul>
            </li>
            <li class="outlineHighlight">Travelling Salesman Problem in PyCSP</li>
            <li>Summary</li>
        </ul>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>TSP Definition</h2>
    </hgroup>
    <article>
        <ul>
            <li>Given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city?</li>
            <li><br>Can be modeled as an complete, undirected weighted graph</li>
            <li><br>Complexity for brute force approach: <b>O(n!)</b></li>
        </ul>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Example Graph &ndash; 4 cities</h2>
    </hgroup>
    <article>
        <article class="flexbox vcenter">
            <img src="images/tsp1.svg" alt="Description" title="Description">
        </article>

    </article>
</slide>


<slide>
    <hgroup>
        <h2>Example Route Lengths</h2>
    </hgroup>
    <article class="flexbox vcenter">
        <img width="75%" src="images/tsp3.svg" alt="Description" title="Description">
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Parallelization &ndash; generating tasks</h2>
    </hgroup>
    <article>
        <arti cle class="flexbox vcenter">
            <img width="60%" src="images/tsp4.svg" alt="Description" title="Description">
        </article>
        <br>
        <ul>
            <li>Sub-routes "AB", "AC", and "AD" used as worker tasks</li>
        </ul>
    </article>
</slide>


<slide>
    <hgroup>
        <h2>Branch-and-Bound Optimization</h2>
    </hgroup>
    <article>
        <article class="flexbox vcenter">
            <img width="65%" src="images/tsp5.svg" alt="Description" title="Description">
        </article>
        <br>
        <ul>
            <li>Discard sub-routes that already are longer than current shortest route</li>
        </ul>

    </article>
</slide>





<slide>
    <hgroup>
        <h2>Demo</h2>
    </hgroup>
    <article>
        <a href="https://github.com/arild/fagdag_aug2013">https://github.com/arild/fagdag_aug2013</a>
    </article>
</slide>

<slide>
    <hgroup>
        <h2>Resources</h2>
    </hgroup>
    <article>
        <ul>
            <li>
                <a href=http://code.google.com/p/pycsp/>PyCSP - http://code.google.com/p/pycsp/</a>
            </li>
            <li>
                <a href=http://www.infoq.com/presentations/erlang-software-for-a-concurrent-world>Erlang - software for a concurrent world</a>
            </li>
            <li>
                <a href=http://letitcrash.com/>Let it crash - Akka team blog</a>
                <ul>
                    <li>Specific post from let it crash</li>
                </ul>
            </li>
        </ul>
    </article>
</slide>


<slide class="thank-you-slide segue nobackground">
    <article class="flexbox vleft">
        <h2>Thanks for your time</h2>
        <br><br>
        <h2>Questions?</h2>
        <br>
        <p>Slides available at: <a href="http://arild.github.io/fagdag_aug2013">http://arild.github.io/fagdag_aug2013</a></p>
    </article>
    <p class="auto-fadein" data-config-contact>
        <!-- populated from slide_config.json -->
    </p>
</slide>

<slide class="backdrop"></slide>

</slides>

<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>

<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
<script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>

